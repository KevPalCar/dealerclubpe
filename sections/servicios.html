<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Servicios - DealerClub</title>
    
    <!-- Enlaces a tus hojas de estilo (rutas CORRECTAS) -->
    <link rel="stylesheet" href="../assets/css/main.css">
    <link rel="stylesheet" href="../assets/css/servicios.css"> 
    
    <!-- NOTA: Las importaciones de fuentes y Font Awesome ya están en main.css -->
</head>
<body>
    <!-- HEADER: Contenedor principal con la imagen de fondo para el hero -->
    <header class="hero-section"> 
        <nav class="navbar">
            <div class="logo">
                <a href="../index.html">DealerClub</a> 
            </div>
            <ul class="nav-menu">
                <li><a href="../index.html#inicio">Inicio</a></li> 
                <li><a href="cursos.html">Cursos</a></li>
                <li><a href="servicios.html" class="current">Servicios</a></li>
                <li><a href="nosotros.html">Nosotros</a></li>
                <li><a href="student_dashboard.html" id="student-access-link">Iniciar Sesión</a></li>
                <!-- El enlace del Admin Panel se ha movido al header, por lo que esta sección se elimina o se deja vacía si no hay otros elementos. -->
                <!-- <div class="footer-admin-link">
                    <a href="admin.html"><i class="fas fa-tools"></i> Admin Panel</a>
                </div> -->
            </ul>
        </nav>

        <!-- Contenido del hero (título, párrafo, botones) -->
        <div class="hero-content text-center">
            <h1>Servicios de Casino para Eventos de Élite</h1>
            <p>Transformamos tu evento en una experiencia de casino inolvidable con profesionales de primer nivel y equipos de calidad.</p>
            <div class="hero-ctas">
                <!-- El botón principal ahora abrirá el modal de cotización general -->
                <button type="button" class="btn btn-primary" id="openGeneralQuoteModal">Solicita tu Presupuesto</button>
            </div>
        </div>
    </header>

    <main>
        <!-- Sección de Mesas Disponibles (AHORA DINÁMICA) -->
        <section id="mesas-disponibles" class="section-light section-padded">
            <div class="container">
                <h2>Nuestras Mesas de Casino para tu Evento</h2>
                <div id="mesas-grid-container" class="mesas-grid">
                    <!-- Las mesas se cargarán dinámicamente aquí desde Firestore -->
                    <div id="loading-mesas" style="text-align: center; color: #ffc107; font-size: 1.2em; padding: 50px;">
                        Cargando mesas disponibles...
                    </div>
                </div>
            </div>
        </section>

        <!-- Nueva Sección: Experiencia DealerClub -->
        <section id="experiencia-dealerclub" class="section-dark section-padded">
            <div class="container">
                <h2>¿Por Qué Elegir Nuestros Servicios de Eventos?</h2>
                <div class="experiencia-grid">
                    <div class="experiencia-item">
                        <i class="fas fa-gem"></i>
                        <h4>Personal Calificado</h4>
                        <p>Nuestros dealers son formados en nuestra propia escuela, garantizando profesionalismo y carisma en cada mesa.</p>
                    </div>
                    <div class="experiencia-item">
                        <i class="fas fa-boxes"></i>
                        <h4>Logística Completa</h4>
                        <p>Nos encargamos del transporte, montaje y desmontaje de todo el equipo de casino en tu evento.</p>
                    </div>
                    <div class="experiencia-item">
                        <i class="fas fa-chart-line"></i>
                        <h4>Asesoramiento Personalizado</h4>
                        <p>Te ayudamos a planificar la mejor configuración y dinámica de juegos para el éxito de tu celebración.</p>
                    </div>
                    <div class="experiencia-item">
                        <i class="fas fa-trophy"></i>
                        <h4>Experiencia Inolvidable</h4>
                        <p>Creamos un ambiente de casino auténtico y divertido que tus invitados recordarán por siempre.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Sección de Dealers Destacados (AHORA DINÁMICA) -->
        <section id="dealers-destacados" class="section-light section-padded">
            <div class="container">
                <h2>Conoce a Nuestros Dealers Destacados</h2>
                <p class="section-description">Nuestros profesionales son la clave para el éxito de tu evento. Su experiencia y carisma transforman cada partida en una experiencia inolvidable. Si deseas un toque extra de exclusividad, puedes solicitar a uno de nuestros talentos destacados para tu evento.</p>
                <div id="dealers-grid-container" class="dealers-grid">
                    <!-- Los dealers se cargarán dinámicamente aquí desde Firestore -->
                    <div id="loading-dealers" style="text-align: center; color: #ffc107; font-size: 1.2em; padding: 50px;">
                        Cargando dealers...
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer: Consistente con el resto del sitio -->
    <footer class="main-footer">
        <div class="footer-container">
            <div class="footer-info">
                <h3>DealerClub</h3>
                <p>Tu talento, es nuestro estandar.</p>
            </div>
            <div class="footer-contact">
                <h3>Contacto</h3>
                <p>WhatsApp: +51 936437502</p>
                <p>Dirección: Calle Los Mirtos 145 / Independencia</p>
            </div>
            <div class="footer-social">
                <h3>Síguenos</h3>
                <a href="https://www.instagram.com/dealerclub.pe/" target="_blank" rel="noopener noreferrer">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/a/a5/Instagram_icon.png" alt="Instagram" class="social-icon">
                </a>
            </div>
            <!-- Enlace discreto al panel de administración (Se elimina de aquí porque va en el login) -->
            <!-- <div class="footer-admin-link">
                <a href="admin.html"><i class="fas fa-tools"></i> Admin Panel</a>
            </div> -->
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 DealerClub. Todos los derechos reservados.</p>
        </div>
    </footer>

    <!-- Icono flotante de WhatsApp (AHORA CON ID PARA ABRIR MODAL) -->
    <a href="#" class="whatsapp-float" id="openWhatsappPreChatModal">
        <i class="fab fa-whatsapp"></i>
    </a>

    <!-- Modal de Cotización de Servicios -->
    <div id="quoteModal" class="modal">
        <div class="modal-content">
            <span class="close-button" id="closeQuoteModalBtn">&times;</span>
            <h2>Solicitar Cotización</h2>
            <p id="modalQuoteFor"></p> 
            <form id="quoteForm">
                <div class="form-group">
                    <label for="fullName">Nombre Completo:</label>
                    <input type="text" id="fullName" name="fullName" required>
                </div>
                <div class="form-group">
                    <label for="email">Correo Electrónico:</label>
                    <input type="email" id="email" name="email" required>
                </div>
                <div class="form-group">
                    <label for="phone">Teléfono (WhatsApp):</label>
                    <input type="tel" id="phone" name="phone" required>
                </div>
                <div class="form-group">
                    <label for="eventType">Tipo de Evento:</label>
                    <select id="eventType" name="eventType" required>
                        <option value="">Selecciona...</option>
                        <option value="corporativo">Corporativo</option>
                        <option value="privado">Privado</option>
                        <option value="boda">Boda</option>
                        <option value="otro">Otro</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="eventDate">Fecha del Evento:</label>
                    <input type="date" id="eventDate" name="eventDate" required>
                </div>
                <div class="form-group">
                    <label for="details">Detalles y mesas/dealers de interés:</label>
                    <textarea id="details" name="details" rows="4"></textarea>
                </div>
                <button type="submit" class="btn btn-primary" id="submitQuoteBtn">Enviar Cotización</button>
                <div id="formMessage" class="form-message"></div>
            </form>
        </div>
    </div>

    <!-- Nuevo Modal de Pre-interacción de WhatsApp -->
    <div id="whatsappPreChatModal" class="modal">
        <div class="modal-content">
            <span class="close-button" id="closeWhatsappModalBtn">&times;</span>
            <h2>Contactar por WhatsApp</h2>
            <p>¿Prefieres una consulta rápida por WhatsApp o llenar el formulario completo?</p>
            
            <form id="whatsappPreChatForm">
                <div class="form-group">
                    <label for="whatsappName">Tu Nombre (opcional):</label>
                    <input type="text" id="whatsappName" name="whatsappName">
                </div>
                <div class="form-group">
                    <label for="whatsappMessage">Tu Mensaje (opcional):</label>
                    <textarea id="whatsappMessage" name="whatsappMessage" rows="3" placeholder="Ej: 'Quisiera información sobre cursos.'"></textarea>
                </div>
                <button type="submit" class="btn btn-primary" id="sendWhatsappBtn">Enviar Mensaje por WhatsApp</button>
            </form>
            
            <p class="or-separator">O</p>

            <button type="button" class="btn btn-secondary" id="goToQuoteFormBtn">Ir al Formulario de Cotización</button>
            <div id="whatsappMessageStatus" class="form-message" style="display: none;"></div>
        </div>
    </div>

    <!-- SCRIPT DE INICIALIZACIÓN DE FIREBASE (mantener al final del body) -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        // Añadir importación de onAuthStateChanged para el enlace de Mi Cuenta
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        // Añadir importación de getDocs para cargar los dealers
        import { getFirestore, collection, addDoc, getDocs } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // 🚨 IMPORTANTE: Pega aquí TU configuración real de Firebase SDK (sin el operador ternario).
        // Asegúrate de copiar el OBJETO COMPLETO desde tu Consola de Firebase -> Configuración del proyecto (⚙️) -> Tus apps -> "Firebase SDK snippet" -> Config
        const firebaseConfig = {
            apiKey: "AIzaSyA3YsyUDmLeAvvgWwvCnjeJt-HbGGk--PY", 
            authDomain: "dealerclubpe.firebaseapp.com",
            projectId: "dealerclubpe",
            storageBucket: "dealerclubpe.firebasestorage.app",
            messagingSenderId: "330568352415",
            appId: "1:330568352415:web:9fcd7651698bfafac998aa",
            measurementId: "G-PF3W9NDSDP"
        };

        const appIdForFirestorePath = 'default-app-id'; 
        const initialAuthToken = null; 

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);

        window.firebaseApp = app;
        window.firebaseDb = db;
        window.firebaseAuth = auth;
        window.firebaseAddDoc = addDoc; 
        window.firebaseCollection = collection;
        window.firebaseGetDocs = getDocs; // Exportar getDocs
        window.appId = appIdForFirestorePath;
        window.initialAuthToken = initialAuthToken; 
        window.signInAnonymously = signInAnonymously; 
        window.signInWithCustomToken = signInWithCustomToken;
        window.firebaseOnAuthStateChanged = onAuthStateChanged; // Exportar onAuthStateChanged
    </script>

    <!-- Script para el enlace de Mi Cuenta en la barra de navegación -->
    <script type="module">
        import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        
        // Asumiendo que `app` y `auth` ya están inicializados globalmente por el script anterior
        const authInstance = window.firebaseAuth || getAuth(window.firebaseApp);

        document.addEventListener('DOMContentLoaded', () => {
            const studentAccessLink = document.getElementById('student-access-link');

            onAuthStateChanged(authInstance, (user) => {
                if (user) {
                    studentAccessLink.textContent = 'Mi Dashboard';
                    studentAccessLink.href = 'student_dashboard.html';
                } else {
                    studentAccessLink.textContent = 'Iniciar Sesión';
                    studentAccessLink.href = 'login.html';
                }
            });
        });
    </script>
    
    <!-- TU SCRIPT JS DE LÓGICA DE PÁGINA (debe ir DESPUÉS del script de Firebase) -->
    <script type="module" src="../assets/js/servicios.js"></script>
</body>
</html>
